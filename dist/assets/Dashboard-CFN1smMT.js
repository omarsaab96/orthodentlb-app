import{j as Ve,k as E,l as je,p as qe,q as Ae,s as Ge,h as te,x as We,y as Ye,f as g,a as pe,u as fe,w as ge,F as N,o as v,m as Ke,b as u,d as z,g as b,t as _,z as q,e as Ze,i as be,A as ye,n as U,B as Je,D as Qe,E as Xe,G as et,H as we}from"./app-DnPmZ5rD.js";import{_ as De}from"./stlfile-BJumaXAz.js";import{_ as tt}from"./AuthenticatedLayout-CjVgOwjX.js";import{P as rt}from"./PrimaryButton-Dce-Gwam.js";import{$ as I}from"./jquery-DpyqxSIO.js";import{_ as nt}from"./_plugin-vue_export-helper-DlAUqK2U.js";function W(e,t,r,i){function o(a){return a instanceof r?a:new r(function(p){p(a)})}return new(r||(r=Promise))(function(a,p){function m(c){try{d(i.next(c))}catch(y){p(y)}}function w(c){try{d(i.throw(c))}catch(y){p(y)}}function d(c){c.done?a(c.value):o(c.value).then(m,w)}d((i=i.apply(e,t||[])).next())})}function Y(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,p=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return p.next=m(0),p.throw=m(1),p.return=m(2),typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(d){return function(c){return w([d,c])}}function w(d){if(i)throw new TypeError("Generator is already executing.");for(;p&&(p=0,d[0]&&(r=0)),r;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(c){d=[6,c],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function at(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),o,a=[],p;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(m){p={error:m}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(p)throw p.error}}return a}function st(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(at(arguments[t]));return e}var ot=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function se(e,t){var r=it(e);if(typeof r.path!="string"){var i=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof i=="string"&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function it(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var i=t.split(".").pop().toLowerCase(),o=ot.get(i);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var lt=[".DS_Store","Thumbs.db"];function ut(e){return W(this,void 0,void 0,function(){return Y(this,function(t){return[2,dt(e)&&e.dataTransfer?ft(e.dataTransfer,e.type):ct(e)]})})}function dt(e){return!!e.dataTransfer}function ct(e){var t=pt(e.target)?e.target.files?me(e.target.files):[]:[];return t.map(function(r){return se(r)})}function pt(e){return e!==null}function ft(e,t){return W(this,void 0,void 0,function(){var r,i;return Y(this,function(o){switch(o.label){case 0:return e.items?(r=me(e.items).filter(function(a){return a.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(gt))]):[3,2];case 1:return i=o.sent(),[2,_e(Pe(i))];case 2:return[2,_e(me(e.files).map(function(a){return se(a)}))]}})})}function _e(e){return e.filter(function(t){return lt.indexOf(t.name)===-1})}function me(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];t.push(i)}return t}function gt(e){if(typeof e.webkitGetAsEntry!="function")return ke(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Le(t):ke(e)}function Pe(e){return e.reduce(function(t,r){return st(t,Array.isArray(r)?Pe(r):[r])},[])}function ke(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var r=se(t);return Promise.resolve(r)}function vt(e){return W(this,void 0,void 0,function(){return Y(this,function(t){return[2,e.isDirectory?Le(e):mt(e)]})})}function Le(e){var t=e.createReader();return new Promise(function(r,i){var o=[];function a(){var p=this;t.readEntries(function(m){return W(p,void 0,void 0,function(){var w,d,c;return Y(this,function(y){switch(y.label){case 0:if(m.length)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return w=y.sent(),r(w),[3,4];case 3:return d=y.sent(),i(d),[3,4];case 4:return[3,6];case 5:c=Promise.all(m.map(vt)),o.push(c),a(),y.label=6;case 6:return[2]}})})},function(m){i(m)})}a()})}function mt(e){return W(this,void 0,void 0,function(){return Y(this,function(t){return[2,new Promise(function(r,i){e.file(function(o){var a=se(o,e.fullPath);r(a)},function(o){i(o)})})]})})}var re={},Fe;function xt(){return Fe||(Fe=1,re.__esModule=!0,re.default=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(",");if(r.length===0)return!0;var i=e.name||"",o=(e.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return r.some(function(p){var m=p.trim().toLowerCase();return m.charAt(0)==="."?i.toLowerCase().endsWith(m):m.endsWith("/*")?a===m.replace(/\/.*$/,""):o===m})}return!0}),re}var ht=xt();const Re=Ve(ht);var F=function(){return F=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},F.apply(this,arguments)};function Ee(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r}function bt(e,t,r,i){function o(a){return a instanceof r?a:new r(function(p){p(a)})}return new(r||(r=Promise))(function(a,p){function m(c){try{d(i.next(c))}catch(y){p(y)}}function w(c){try{d(i.throw(c))}catch(y){p(y)}}function d(c){c.done?a(c.value):o(c.value).then(m,w)}d((i=i.apply(e,[])).next())})}function yt(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,p;return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(d){return function(c){return w([d,c])}}function w(d){if(i)throw new TypeError("Generator is already executing.");for(;p&&(p=0,d[0]&&(r=0)),r;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(c){d=[6,c],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function xe(e,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,a;i<o;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}function wt(e){return e.includes("MSIE")||e.includes("Trident/")}function Dt(e){return e.includes("Edge/")}function _t(e){return e===void 0&&(e=window.navigator.userAgent),wt(e)||Dt(e)}function Oe(e){e.preventDefault()}function ne(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function ae(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}var kt="file-invalid-type",Ft="file-too-large",Et="file-too-small",Ot="too-many-files",St={code:Ot,message:"Too many files"},Tt=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:kt,message:"File type must be ".concat(t)}};function G(e){return e!=null}var Ct=Re.default,It=Ct||Re;function ze(e,t){var r=e.type==="application/x-moz-file"||It(e,t);return[r,r?null:Tt(t)]}var Se=function(e){return{code:Ft,message:"File is larger than ".concat(e," bytes")}},Te=function(e){return{code:Et,message:"File is smaller than ".concat(e," bytes")}};function Ue(e,t,r){if(G(e.size)&&e.size)if(G(t)&&G(r)){if(e.size>r)return[!1,Se(r)];if(e.size<t)return[!1,Te(t)]}else{if(G(t)&&e.size<t)return[!1,Te(t)];if(G(r)&&e.size>r)return[!1,Se(r)]}return[!0,null]}function A(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e.some(function(a){return!ae(r)&&a&&a.apply(void 0,xe([r],i,!1)),ae(r)})}}function jt(e){var t=e.files,r=e.accept,i=e.minSize,o=e.maxSize,a=e.multiple,p=e.maxFiles;return!a&&t.length>1||a&&p>=1&&t.length>p?!1:t.every(function(m){var w=ze(m,r)[0],d=Ue(m,i,o)[0];return w&&d})}var At={disabled:!1,getFilesFromEvent:ut,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1};function Pt(e){e===void 0&&(e={});var t=E(F(F({},At),e));je(function(){return F({},e)},function(n){t.value=F(F({},t.value),n)});var r=E(),i=E(),o=qe({isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]}),a=function(){i.value&&(o.isFileDialogActive=!0,i.value.value="",i.value.click())},p=function(){var n=t.value.onFileDialogCancel;o.isFileDialogActive&&setTimeout(function(){if(i.value){var s=i.value.files;s&&!s.length&&(o.isFileDialogActive=!1,typeof n=="function"&&n())}},300)};function m(){o.isFocused=!0}function w(){o.isFocused=!1}function d(){var n=t.value.noClick;n||(_t()?setTimeout(a,0):a())}var c=E([]),y=function(n){if(r.value){var s=r.value.$el||r.value;s.contains(n.target)||(n.preventDefault(),c.value=[])}};Ae(function(){window.addEventListener("focus",p,!1);var n=t.value.preventDropOnDocument;n&&(document.addEventListener("dragover",Oe,!1),document.addEventListener("drop",y,!1))}),Ge(function(){window.removeEventListener("focus",p,!1);var n=t.value.preventDropOnDocument;n&&(document.removeEventListener("dragover",Oe),document.removeEventListener("drop",y))});function M(n){var s=t.value.noDragEventsBubbling;s&&n.stopPropagation()}function oe(n){return bt(this,void 0,void 0,function(){var s,l,f,x,h;return yt(this,function(D){switch(D.label){case 0:return s=t.value,l=s.getFilesFromEvent,f=s.noDragEventsBubbling,x=s.onDragEnter,n.preventDefault(),M(n),c.value=xe(xe([],c.value,!0),[n.target],!1),ne(n)?l?[4,l(n)]:[2]:[3,2];case 1:if(h=D.sent(),h||(h=[]),ae(n)&&!f)return[2];o.draggedFiles=h,o.isDragActive=!0,x&&x(n),D.label=2;case 2:return[2]}})})}function ie(n){var s=t.value.onDragOver;if(n.preventDefault(),M(n),n.dataTransfer)try{n.dataTransfer.dropEffect="copy"}catch{}return ne(n)&&s&&s(n),!1}function le(n){n.preventDefault(),M(n);var s=c.value.filter(function(x){if(!r.value)return!1;var h=r.value.$el||r.value;return h.contains(x)}),l=s.indexOf(n.target);if(l!==-1&&s.splice(l,1),c.value=s,!(s.length>0)){o.draggedFiles=[],o.isDragActive=!1;var f=t.value.onDragLeave;ne(n)&&f&&f(n)}}function K(n){n.preventDefault(),M(n),c.value=[];var s=t.value,l=s.getFilesFromEvent,f=s.noDragEventsBubbling,x=s.accept,h=s.minSize,D=s.maxSize,O=s.multiple,C=s.maxFiles,j=s.onDrop,B=s.onDropRejected,S=s.onDropAccepted;if(ne(n)){if(!l)return;Promise.resolve(l(n)).then(function(de){if(!(ae(n)&&!f)){var T=[],L=[];de.forEach(function(R){var ee=ze(R,x),ce=ee[0],Me=ee[1],he=Ue(R,h,D),$e=he[0],Be=he[1];if(ce&&$e)T.push(R);else{var Ne=[Me,Be].filter(function(He){return He});L.push({file:R,errors:Ne})}}),(!O&&T.length>1||O&&C>=1&&T.length>C)&&(T.forEach(function(R){L.push({file:R,errors:[St]})}),T.splice(0)),o.acceptedFiles=T,o.fileRejections=L,j&&j(T,L,n),L.length>0&&B&&B(L,n),T.length>0&&S&&S(T,n)}})}o.isFileDialogActive=!1,o.isDragActive=!1,o.draggedFiles=[],o.acceptedFiles=[],o.fileRejections=[]}var P=function(n){return t.value.disabled?void 0:n},Z=function(n){return t.value.noKeyboard?void 0:P(n)},H=function(n){return t.value.noDrag?void 0:P(n)},ue=function(n){n===void 0&&(n={});var s=n.onFocus,l=n.onBlur,f=n.onClick,x=n.onDragEnter,h=n.onDragenter,D=n.onDragOver,O=n.onDragover,C=n.onDragLeave,j=n.onDragleave,B=n.onDrop,S=Ee(n,["onFocus","onBlur","onClick","onDragEnter","onDragenter","onDragOver","onDragover","onDragLeave","onDragleave","onDrop"]);return F(F({onFocus:Z(A(s,m)),onBlur:Z(A(l,w)),onClick:P(A(f,d)),onDragenter:H(A(x,h,oe)),onDragover:H(A(D,O,ie)),onDragleave:H(A(C,j,le)),onDrop:H(A(B,K)),ref:r},!t.value.disabled&&!t.value.noKeyboard?{tabIndex:0}:{}),S)},J=function(n){n.stopPropagation()};function Q(n){n===void 0&&(n={});var s=n.onChange,l=n.onClick,f=Ee(n,["onChange","onClick"]),x={accept:t.value.accept,multiple:t.value.multiple,style:"display: none",type:"file",onChange:P(A(s,K)),onClick:P(A(l,J)),autoComplete:"off",tabIndex:-1,ref:i};return F(F({},x),f)}var X=te(function(){return o.draggedFiles?o.draggedFiles.length:0}),V=te(function(){return X.value>0&&jt({files:o.draggedFiles,accept:t.value.accept,minSize:t.value.minSize,maxSize:t.value.maxSize,multiple:t.value.multiple,maxFiles:t.value.maxFiles})}),$=te(function(){return X.value>0&&!V.value});return F(F({},We(o)),{isDragAccept:V,isDragReject:$,isFocused:te(function(){return o.isFocused&&!t.value.disabled}),getRootProps:ue,getInputProps:Q,rootRef:r,inputRef:i,open:P(a)})}const k=[];for(let e=0;e<256;++e)k.push((e+256).toString(16).slice(1));function Lt(e,t=0){return(k[e[t+0]]+k[e[t+1]]+k[e[t+2]]+k[e[t+3]]+"-"+k[e[t+4]]+k[e[t+5]]+"-"+k[e[t+6]]+k[e[t+7]]+"-"+k[e[t+8]]+k[e[t+9]]+"-"+k[e[t+10]]+k[e[t+11]]+k[e[t+12]]+k[e[t+13]]+k[e[t+14]]+k[e[t+15]]).toLowerCase()}let ve;const Rt=new Uint8Array(16);function zt(){if(!ve){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ve=crypto.getRandomValues.bind(crypto)}return ve(Rt)}const Ut=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ce={randomUUID:Ut};function Ie(e,t,r){var o;if(Ce.randomUUID&&!e)return Ce.randomUUID();e=e||{};const i=e.random??((o=e.rng)==null?void 0:o.call(e))??zt();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Lt(i)}const Mt={class:"flex flex-col justify-between"},$t={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200 mb-5 flex items-center"},Bt={key:0},Nt={key:1,class:"ml-[10px] bg-[#c6c656] text-[#916106] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"},Ht={key:2,class:"ml-[10px] bg-[#c65656] text-[#910606] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"},Vt={class:"py-12"},qt={class:"errorDIV mx-auto max-w-7xl sm:px-6 lg:px-8 flex-col flex md:flex-row gap-4 md:gap-4"},Gt={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-[20px] w-full",role:"alert"},Wt={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 flex-col flex md:flex-row gap-4 md:gap-4"},Yt={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 w-full"},Kt={class:"p-6 text-gray-900 dark:text-gray-100"},Zt={key:0,class:"mb-[20px] font-semibold text-[20px] border-b border-gray-100 dark:border-gray-700"},Jt={key:1,class:"text-white italic text-[14px]"},Qt={key:2},Xt={class:"flex flex-col mb-0"},er={class:"text-[18px] mb-[5px] font-bold leading-[20px]"},tr=["innerHTML"],rr={key:0,class:"text-[14px] mb-[10px] leading-[16px]"},nr={class:"uploadedFilesDiv"},ar={class:"text-[14px] leading-[16px] flex items-center"},sr={class:"mr-[10px]"},or={class:"uploadedFilesUl pt-2 hide transition"},ir=["href"],lr={class:"flex justify-between items-center"},ur={class:"w-[calc(100%-30px)]"},dr={class:"flex items-center w-full"},cr={class:"fileOriginalName mr-[10px] w-full whitespace-nowrap overflow-hidden text-ellipsis text-[14px] leading-[16px]"},pr={class:"fileSize text-right w-[100px] dark:text-white-700 text-[12px] leading-[12px]"},fr={class:"hidden p-6 text-gray-900 dark:text-gray-100"},gr={class:"flex items-center"},vr={class:"w-[calc(100%-40px)]"},mr={class:"flex items-center mb-[5px] w-full"},xr={class:"fileOriginalName mr-[10px] w-full whitespace-nowrap overflow-hidden text-ellipsis font-bold text-[16px] leading-[16px]"},hr={class:"flex items-center justify-between"},br={class:"fileSize dark:text-white-700 text-[12px] leading-[12px]"},yr=["innerHTML"],wr={key:0,class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 w-full"},Dr={class:"p-6 text-gray-900 dark:text-gray-100"},_r={class:"flex align-center mb-[20px] pb-[10px] font-semibold text-[20px] leading-[20px] border-b border-gray-100 dark:border-gray-700"},kr={key:0,class:"flex align-center justify-between mr-[5px] text-[20px] leading-[20px]"},Fr={class:"w-[calc(100%-30px)]"},Er={key:1,class:"flex align-center justify-between mr-[5px] text-[20px] leading-[20px]"},Or={key:2},Sr={class:"mb-4 hideOnProcessing"},Tr=["disabled"],Cr={class:"mb-4 hideOnProcessing"},Ir=["disabled"],jr={class:"hideOnProcessing mb-4"},Ar={class:"flex items-center space-x-2"},Pr={key:0},Lr={key:1,class:"font-medium text-gray-600 dark:text-white"},Rr={key:0,class:"hideOnDone p-1 shadow-sm rounded-[10px] mb-[20px] mt-[0px]",role:"alert"},zr={class:"flex items-center w-[85%]"},Ur={class:"fileicon mr-[10px]"},Mr=["innerHTML"],$r={class:"fileInfo w-[calc(100%-35px)] inline-flex flex-col"},Br={class:"filename w-full max-w-[100%] leading-[16px] mb-[5px] text-[14px] whitespace-nowrap overflow-hidden text-ellipsis"},Nr={key:0,class:"filesize text-[12px] leading-[12px]"},Hr={key:1,class:"progress-bar"},Vr={class:"fileRemove w-[50px] text-right"},qr=["onClick"],Gr={key:1},Wr={key:2},Yr={key:3},Kr={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-[20px]",role:"alert"},Zr={class:"flex items-center mb-[20px] justify-between"},Jr={class:"flex items-center w-[90%]"},Qr={class:"fileicon mr-[10px]"},Xr={class:"fileInfo w-[calc(100%-35px)] inline-flex flex-col"},en={class:"filename w-full max-w-[100%] leading-[16px] mb-[5px] text-[14px] whitespace-nowrap overflow-hidden text-ellipsis"},tn={class:"filesize text-[12px] leading-[12px]"},rn={class:"fileRemove w-[15px]"},nn=["onClick"],an={class:"hideOnProcessing actions flex justify-end"},sn={__name:"Dashboard",props:{orders:{type:Array,required:!0},files:{type:Array,required:!0}},setup(e){Ye("$swal");const t=E({processing:!1,name:"",description:"",files:[]}),r=E([]),i=E([]),o=E(""),a=E(!1),p=E(!1),m=E(!1),w=E(!1);let d=!1;const c=E({});Ae(()=>{I(".uploadedFileToggle").click(function(){I(this).hasClass("open")?(I(this).removeClass("open"),I(this).parent().parent().find(".uploadedFilesUl").slideUp(),I(this).text("Show files")):(I(this).addClass("open"),I(this).parent().parent().find(".uploadedFilesUl").slideDown(),I(this).text("Hide files"))})});const y=(n,s)=>{let l=n.files;l.forEach(f=>{const x=new FormData;x.append("orderId",s),x.append("uploadedFiles[]",f),c.value[f.id]=0,we.post("/api/upload",x,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:h=>{const D=h.lengthComputable?h.total:h.target.getResponseHeader("content-length")||h.target.getResponseHeader("x-decompressed-content-length");if(D!==null){const O=Math.round(h.loaded*100/D);c.value[f.id]=O}}}).then(h=>{console.log(h.data),f.status="uploaded",l.every(D=>D.status==="uploaded")&&(t.value.status="done",I(".hideOnDone").slideUp(),setTimeout(function(){window.location.reload()},1e3))}).catch(h=>{var D,O,C,j;console.log(h),o.value=((O=(D=h.response)==null?void 0:D.data)==null?void 0:O.message)==="The uploaded files field is required."?"Please choose files to upload.":(j=(C=h.response)==null?void 0:C.data)==null?void 0:j.message,c.value[f.id]=0})})},M=n=>{let s=n.name,l=n.description;const f=new FormData;f.append("orderName",s),f.append("orderDescription",l),we.post("/api/create-order",f,{headers:{"Content-Type":"multipart/form-data"}}).then(x=>{let h=x.data.createdOrder.id;y(n,h)}).catch(x=>{console.log(x),t.value.processing=!1,c.value={}})},oe=()=>{if(t.value.name.trim()===""){d=!0,p.value=!0;return}if(t.value.description.trim()===""){m.value=!0;return}if(t.value.files.length==0){w.value=!0;return}t.value.processing=!0,I(".hideOnProcessing").slideUp(),M(t.value)},ie=()=>{d&&t.value.name.trim()===""?p.value=!0:p.value=!1},le=()=>{d&&t.value.description.trim()===""?m.value=!0:m.value=!1},K=(n,s)=>{console.log("acceptedFiles= ",n),console.log("rejectedFiles= ",s);for(let l=0;l<s.length;l++){const f=s[l];f.id=Ie()}for(let l=0;l<n.length;l++){const f=n[l];f.id=Ie()}r.value.length>0?r.value=[...r.value,...s]:r.value=s,i.value.length>0?i.value=[...i.value,...n]:i.value=n,t.value.files.push(...n),console.log(t.value.files)},{getRootProps:P,getInputProps:Z,open:H,isDragActive:ue}=Pt({onDrop:K,accept:[".stl",".ply"]}),J=n=>{const s=r.value.findIndex(f=>f.id===n.id),l=i.value.findIndex(f=>f.id===n.id);s!==-1?r.value.splice(s,1):l!==-1?(i.value.splice(l,1),t.value.files=i.value):console.warn("File not found:",n.id)};je(ue,n=>{a.value=n});const Q=n=>{switch(n){case"image/png":case"image/jpeg":case"image/jpg":case"image/gif":case"image/bmp":case"image/webp":case"image/tiff":case"image/svg+xml":return"fa-file-image";case"application/pdf":return"fa-file-pdf";case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"fa-file-excel";case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"fa-file-word";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"fa-file-powerpoint";case"text/html":case"application/xml":case"text/xml":return"fa-file-code";case"application/x-rar-compressed":case"application/x-zip-compressed":case"application/zip":return"fa-file-zipper";case"video/mp4":case"video/x-msvideo":case"video/quicktime":case"video/x-matroska":case"video/x-flv":case"video/x-ms-wmv":case"video/webm":case"video/3gpp":case"video/mpeg":case"video/hevc":return"fa-file-video";default:return"fa-file"}},X=n=>{const s=n.name.split(".").length;return n.name.split(".")[s-1]=="ply"?"<img class='w-[30px] ' src='../../../images/plyfile.svg' />":n.name.split(".")[s-1]=="stl"?"<img class='w-[30px] ' src='../../../images/stlfile.svg' />":"<i class='fa-solid fa-file'></i>"},V=n=>{if(typeof n!="string"&&(n=String(n)),n.includes("T")){const S=new Date(n),de=String(S.getUTCDate()).padStart(2,"0"),T=String(S.getUTCMonth()+1).padStart(2,"0"),L=S.getUTCFullYear(),R=String(S.getUTCHours()).padStart(2,"0"),ee=String(S.getUTCMinutes()).padStart(2,"0"),ce=String(S.getUTCSeconds()).padStart(2,"0");n=`${de}${T}${L}${R}${ee}${ce}`}const s=n.substring(0,2),l=n.substring(2,4)-1,f=n.substring(4,8),x=n.substring(8,10),h=n.substring(10,12),D=n.substring(12,14),O=new Date(Date.UTC(f,l,s,x,h,D)),C=Intl.DateTimeFormat().resolvedOptions().timeZone,j=O.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",timeZone:C}),B=O.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:C});return`<div class="date mr-[5px]">${j}</div> <div class="time">${B}</div>`},$=n=>(n/(1024*1024)).toFixed(2)+" MB";return(n,s)=>(v(),g(N,null,[pe(fe(Ke),{title:"Dashboard"}),pe(tt,null,{header:ge(()=>[u("div",Mt,[u("h2",$t,[s[2]||(s[2]=z(" Hi, ")),n.$page.props.auth.user.type=="normal"?(v(),g("span",Bt,"  Dr.  ")):b("",!0),z(" "+_(n.$page.props.auth.user.name)+"! ",1),n.$page.props.auth.user.type=="admin"?(v(),g("span",Nt," admin ")):b("",!0),n.$page.props.auth.user.type=="superadmin"?(v(),g("span",Ht," SUDO ")):b("",!0)])])]),default:ge(()=>[u("div",Vt,[u("div",qt,[n.$page.props.flash.message?(v(),g("div",Gt,_(n.$page.props.flash.message),1)):b("",!0)]),u("div",Wt,[u("div",Yt,[u("div",Kt,[n.$page.props.auth.user.type!="superadmin"?(v(),g("h3",Zt," Previous Orders ")):b("",!0),e.orders.length==0?(v(),g("div",Jt,"No orders")):b("",!0),e.orders.length>0?(v(),g("ul",Qt,[(v(!0),g(N,null,q(e.orders,l=>{var f;return v(),g("li",{key:l.id,class:U([{"border-gray-300 dark:border-gray-600 ":l.status==="new","border-yellow-500 border-opacity-50":l.status==="processing","border-blue-400 border-opacity-50":l.status==="shipped","border-green-500 border-opacity-50":l.status==="done","border-red-500 border-opacity-50":l.status==="canceled"},"p-2 relative mb-[20px] last:mb-0 block w-full rounded-[10px] border-2 shadow-sm dark:bg-gray-700 dark:text-white"])},[u("div",{class:U([{"bg-white text-gray-700":l.status==="new","bg-yellow-500 text-yellow-800":l.status==="processing","bg-blue-400 text-blue-900":l.status==="shipped","bg-green-500 text-green-900":l.status==="done","bg-red-500  text-red-900":l.status==="canceled"},"absolute top-2 right-[8px] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"])},_(l.status),3),u("div",Xt,[u("div",er,_(l.name),1),u("div",{class:"flex items-center mb-[15px] dark:text-gray-400 text-[12px] leading-[12px]",innerHTML:V(l.created_at)},null,8,tr),l.description!=null?(v(),g("div",rr,_(l.description),1)):b("",!0)]),u("div",nr,[u("div",ar,[u("span",sr,"Attached files ("+_((f=l.attachments)==null?void 0:f.length)+")",1),s[3]||(s[3]=u("a",{href:"javascript:;",class:"uploadedFileToggle hover:text-gray-900 transition text-[12px] leading-[16px]"},[z(" Show files "),u("i")],-1))]),u("ul",or,[(v(!0),g(N,null,q(l.attachments,x=>(v(),g("li",{key:x.id,class:"p-[5px] block w-full rounded-[5px] dark:text-white transition hover:bg-gray-900"},[u("a",{href:x.file_path},[u("div",lr,[s[4]||(s[4]=u("div",{class:"mr-[10px] w-[15px]"},[u("img",{class:"w-[15px]",src:De,alt:""})],-1)),u("div",ur,[u("div",dr,[u("div",cr,_(x.originalName),1),u("div",pr,_($(x.size)),1)])])])],8,ir)]))),128))])])],2)}),128))])):b("",!0)]),u("div",fr,[s[6]||(s[6]=u("h3",{class:"mb-[20px] font-semibold text-[20px] border-b border-gray-100 dark:border-gray-700"}," Files",-1)),u("ul",null,[(v(!0),g(N,null,q(e.files,l=>(v(),g("li",{key:l.id,class:"p-2 mb-[20px] last:mb-0 block w-full rounded-[10px] border-gray-300 border-2 shadow-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white hover:border-gray-400 focus:border-gray-400"},[u("div",gr,[s[5]||(s[5]=u("div",{class:"mr-[10px] w-[30px]"},[u("img",{class:"w-[30px]",src:De,alt:""})],-1)),u("div",vr,[u("div",mr,[u("div",xr,_(l.originalName.split(".")[0]),1)]),u("div",hr,[u("div",br,_($(l.size)),1),u("div",{class:"fileUploadedOn flex items-center dark:text-white-700 text-[12px] leading-[12px]",innerHTML:V(l.dateOfUpload)},null,8,yr)])])])]))),128))])])]),n.$page.props.auth.user.type=="normal"?(v(),g("div",wr,[u("div",Dr,[u("h3",_r,[t.value.processing&&t.value.status!="done"?(v(),g("div",kr,[s[7]||(s[7]=u("span",{class:"w-[20px] loader"},null,-1)),u("span",Fr,"Creating Order '"+_(t.value.name)+"'",1)])):b("",!0),t.value.status=="done"?(v(),g("div",Er,s[8]||(s[8]=[u("span",{class:"w-[30px]"},[u("i",{class:"fa-solid fa-check text-[20px] leading-[20px] text-[#1cdb5c]"})],-1),u("span",{class:""},"Files uploaded!",-1)]))):b("",!0),!t.value.processing&&t.value.status!="done"?(v(),g("div",Or,"New Order")):b("",!0)]),z(" "+_(o.value)+" ",1),u("form",{onSubmit:Ze(oe,["prevent"])},[u("div",Sr,[s[9]||(s[9]=u("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Patient's name",-1)),be(u("input",{type:"text",id:"name",disabled:t.value.processing,"onUpdate:modelValue":s[0]||(s[0]=l=>t.value.name=l),onInput:ie,class:U([{"!border-red-500":p.value},"mt-1 block w-full rounded-[10px] border-gray-300 transition border-2 shadow-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white hover:border-gray-400 focus:border-gray-400 focus:ring-0 focus:outline-none"])},null,42,Tr),[[ye,t.value.name]])]),u("div",Cr,[s[10]||(s[10]=u("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Description",-1)),be(u("textarea",{type:"text",id:"name",disabled:t.value.processing,"onUpdate:modelValue":s[1]||(s[1]=l=>t.value.description=l),onInput:le,class:U([{"!border-red-500":m.value},"mt-1 block w-full rounded-[10px] border-gray-300 transition border-2 shadow-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white hover:border-gray-400 focus:border-gray-400 focus:ring-0 focus:outline-none h-[150px] resize-none"])},null,42,Ir),[[ye,t.value.description]])]),u("div",jr,[s[13]||(s[13]=u("span",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"},"Document (STL file)",-1)),u("div",Je(fe(P)(),{class:[{"!border-red-500":w.value},"dropzone flex justify-center w-full h-32 px-4 transition border-2 shadow-sm dark:bg-gray-700 border-gray-600 border-dashed rounded-[10px] appearance-none cursor-pointer hover:border-gray-400 focus:ring-0 outline-none"]}),[u("input",Qe(Xe(fe(Z)())),null,16),u("span",Ar,[s[12]||(s[12]=u("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 text-gray-600 dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),a.value?(v(),g("p",Pr,"Drop the files here ...")):(v(),g("span",Lr,s[11]||(s[11]=[z(" Drop files to Attach, or "),u("span",{class:"text-blue-600 dark:text-white underline transition hover:text-blue-600"},"browse",-1)])))])],16)]),i.value.length>0?(v(),g("div",Rr,[u("ul",null,[(v(!0),g(N,null,q(i.value,l=>(v(),g("li",{key:l.name,class:"flex items-center mb-[20px] last:mb-0 justify-between"},[u("div",zr,[u("div",Ur,[l.type!=""?(v(),g("i",{key:0,class:U(["fa-solid text-[20px]",Q(l.type)])},null,2)):b("",!0),l.type==""?(v(),g("span",{key:1,innerHTML:X(l)},null,8,Mr)):b("",!0)]),u("div",$r,[u("div",Br,[u("b",null,_(l.name),1)]),!t.value.processing&&c.value!=0&&l.status!="uploaded"?(v(),g("div",Nr,_($(l.size)),1)):b("",!0),t.value.processing&&c.value[l.id]>0&&l.status!="uploaded"?(v(),g("div",Hr,[u("div",{class:"progress-bar-fill",style:et({width:c.value[l.id]+"%"})},null,4)])):b("",!0)])]),u("div",Vr,[!t.value.processing&&l.status!="uploaded"?(v(),g("a",{key:0,onClick:f=>J(l),class:"text-white-500 cursor-pointer"},s[14]||(s[14]=[u("i",{class:"fa-regular fa-trash-can text-[16px]"},null,-1)]),8,qr)):b("",!0),t.value.processing&&c.value[l.id]>0&&l.status=="uploaded"?(v(),g("div",Gr,s[15]||(s[15]=[u("i",{class:"fa-solid fa-check text-[16px] leading-[16px] text-[#1cdb5c]"},null,-1)]))):b("",!0),t.value.processing&&c.value[l.id]&&l.status!="uploaded"?(v(),g("div",Wr,_(c.value[l.id])+" % ",1)):b("",!0),t.value.processing&&c.value[l.id]==0&&l.status!="uploaded"?(v(),g("div",Yr,s[16]||(s[16]=[u("span",{class:"border-1 border-white border-solid"},null,-1)]))):b("",!0)])]))),128))])])):b("",!0),r.value.length>0?(v(),g("div",Kr,[s[18]||(s[18]=u("p",{class:"flex mb-[20px]"},[u("span",{class:"font-bold mr-[5px]"},"Rejected Files"),z(" Invalid file type")],-1)),u("ul",null,[(v(!0),g(N,null,q(r.value,l=>(v(),g("li",Zr,[u("div",Jr,[u("div",Qr,[u("i",{class:U(["fa-solid text-[30px]",Q(l.file.type)])},null,2)]),u("div",Xr,[u("div",en,[u("b",null,_(l.file.name),1)]),u("div",tn,_($(l.file.size)),1)])]),u("div",rn,[u("a",{onClick:f=>J(l),class:"text-red-500 cursor-pointer"},s[17]||(s[17]=[u("i",{class:"fa-regular fa-trash-can text-[16px]"},null,-1)]),8,nn)])]))),256))])])):b("",!0),u("div",an,[pe(rt,{class:U({"opacity-25":t.value.processing}),disabled:t.value.processing},{default:ge(()=>s[19]||(s[19]=[z(" Upload ")])),_:1},8,["class","disabled"])])],32)])])):b("",!0)])])]),_:1})],64))}},fn=nt(sn,[["__scopeId","data-v-e0b0d211"]]);export{fn as default};
