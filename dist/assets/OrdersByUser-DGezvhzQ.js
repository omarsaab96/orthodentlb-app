import{k as h,h as q,q as I,f as i,a as m,u as k,w as b,F as f,o as n,m as P,b as e,d as c,t as d,g,i as E,A as G,z as y,n as S,P as Q}from"./app-DnPmZ5rD.js";import{_ as Y}from"./stlfile-BJumaXAz.js";import{_ as J}from"./AuthenticatedLayout-CjVgOwjX.js";import{$ as a}from"./jquery-DpyqxSIO.js";const K={class:"flex flex-col justify-between"},R={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200 mb-5 flex items-center"},W={key:0,class:"ml-[10px] bg-[#c6c656] text-[#916106] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"},X={key:1,class:"ml-[10px] bg-[#c65656] text-[#910606] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"},ee={class:"py-12"},te={class:"errorDIV mx-auto max-w-7xl sm:px-6 lg:px-8 flex-col flex md:flex-row gap-4 md:gap-4"},se={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-[20px] w-full",role:"alert"},re={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 flex-col flex md:flex-row gap-4 md:gap-4"},ae={key:0,class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 w-full"},oe={class:"filtersDiv p-2 border-b border-gray-100 dark:border-gray-700 flex flex-col md:flex-row gap-4"},ie={class:"px-[10px] py-6 text-gray-900 dark:text-gray-100"},ne={class:"flex align-center justify-between text-[18px] leading-[20px]"},de={class:"ordersList hidden mt-[20px]"},le={class:"flex flex-col mb-[10px]"},pe={class:"text-[18px] mb-[10px] leading-[20px]"},ce={class:"block font-bold mb-[5px]"},ue=["innerHTML"],ge={class:"uploadedFilesDiv"},xe={class:"text-[14px] leading-[16px] flex items-center"},he={class:"mr-[10px]"},fe={class:"uploadedFilesUl pt-2 hide transition"},me=["href"],be={class:"flex justify-between items-center"},ye={class:"w-[calc(100%-30px)]"},we={class:"flex items-center w-full"},ve={class:"fileOriginalName mr-[10px] w-full whitespace-nowrap overflow-hidden text-ellipsis text-[14px] leading-[16px]"},_e={class:"fileSize text-right w-[100px] dark:text-white-700 text-[12px] leading-[12px]"},ke={key:0,class:"text-center italic text-[14px]"},Ue={__name:"OrdersByUser",props:{orders:{type:Array,required:!0}},setup(C){const T=C.orders.reduce((t,r)=>{const o=r.created_by;return t[o]||(t[o]=[]),t[o].push(r),t},{}),$=Object.entries(T).map(([t,r])=>({createdBy:t,orders:r})),D=t=>{if(typeof t!="string"&&(t=String(t)),t.includes("T")){const p=new Date(t),N=String(p.getUTCDate()).padStart(2,"0"),V=String(p.getUTCMonth()+1).padStart(2,"0"),z=p.getUTCFullYear(),H=String(p.getUTCHours()).padStart(2,"0"),A=String(p.getUTCMinutes()).padStart(2,"0"),Z=String(p.getUTCSeconds()).padStart(2,"0");t=`${N}${V}${z}${H}${A}${Z}`}const r=t.substring(0,2),o=t.substring(2,4)-1,s=t.substring(4,8),x=t.substring(8,10),l=t.substring(10,12),L=t.substring(12,14),v=new Date(Date.UTC(s,o,r,x,l,L)),_=Intl.DateTimeFormat().resolvedOptions().timeZone,j=v.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",timeZone:_}),M=v.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:_});return`<div class="flex"><div class="date mr-[5px]">${j}</div> <div class="time">${M}</div></div>`},U=t=>(t/(1024*1024)).toFixed(2)+" MB",u=h(""),F=h(""),O=h("desc"),w=q(()=>$.filter(t=>!u.value||t.createdBy.toLowerCase().includes(u.value.toLowerCase()))),B=()=>{F.value="",u.value="",O.value="desc"};return I(()=>{a(".uploadedFileToggle").click(function(){a(this).hasClass("open")?(a(this).removeClass("open"),a(this).parent().parent().find(".uploadedFilesUl").slideUp(),a(this).text("Show files")):(a(this).addClass("open"),a(this).parent().parent().find(".uploadedFilesUl").slideDown(),a(this).text("Hide files"))}),a(".userOrderToggle").click(function(){a(this).hasClass("open")?(a(this).removeClass("open"),a(this).parent().parent().find(".ordersList").slideUp(),a(this).text("Show orders")):(a(this).addClass("open"),a(this).parent().parent().find(".ordersList").slideDown(),a(this).text("Hide orders"))})}),h(!1),(t,r)=>(n(),i(f,null,[m(k(P),{title:"Orders"}),m(J,null,{header:b(()=>[e("div",K,[e("h2",R,[c(" Hi, "+d(t.$page.props.auth.user.name)+"! ",1),t.$page.props.auth.user.type=="admin"?(n(),i("span",W," admin ")):g("",!0),t.$page.props.auth.user.type=="superadmin"?(n(),i("span",X," SUDO ")):g("",!0)])])]),default:b(()=>[e("div",ee,[e("div",te,[t.$page.props.flash.message?(n(),i("div",se,d(t.$page.props.flash.message),1)):g("",!0)]),e("div",re,[t.$page.props.auth.user.type=="admin"||t.$page.props.auth.user.type=="superadmin"?(n(),i("div",ae,[e("div",oe,[E(e("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>u.value=o),type:"text",placeholder:"Search by name...",class:"mt-0 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600 block w-full md:w-full"},null,512),[[G,u.value]]),e("button",{onClick:r[1]||(r[1]=o=>B()),class:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-1 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-gray-700 focus:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 active:bg-gray-900 dark:bg-gray-200 dark:text-gray-800 dark:hover:bg-white dark:focus:bg-white dark:focus:ring-offset-gray-800 dark:active:bg-gray-300"}," Clear ")]),e("div",ie,[e("ul",null,[(n(!0),i(f,null,y(w.value,o=>(n(),i("li",{key:o.createdBy,class:"p-2 relative mb-[20px] last:mb-0 block w-full rounded-[10px] border-2 border-gray-300 dark:border-gray-600 shadow-sm dark:bg-gray-700 dark:text-white"},[e("h3",ne,[c(d(o.createdBy)+" ",1),r[2]||(r[2]=e("a",{href:"javascript:;",class:"userOrderToggle hover:text-gray-900 transition text-[12px] leading-[16px]"},[c(" Show Orders "),e("i")],-1))]),e("ul",de,[(n(!0),i(f,null,y(o.orders,s=>{var x;return n(),i("li",{key:s.id,class:S([{" dark:border-gray-600 ":s.status==="new","border-yellow-500 border-opacity-50":s.status==="processing","border-blue-400 border-opacity-50":s.status==="shipped","border-green-500 border-opacity-50":s.status==="done","border-red-500 border-opacity-50":s.status==="canceled"},"p-2 relative mb-[20px] last:mb-0 block w-full rounded-[10px] border-2 shadow-sm dark:bg-gray-700 dark:text-white"])},[e("div",{class:S([{"bg-white text-gray-700":s.status==="new","bg-yellow-500 text-yellow-800":s.status==="processing","bg-blue-400 text-blue-900":s.status==="shipped","bg-green-500 text-green-900":s.status==="done","bg-red-500  text-red-900":s.status==="canceled"},"absolute top-2 right-[8px] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"])},d(s.status),3),m(k(Q),{href:t.route("orders.details",{id:s.id}),class:"absolute top-[50%] translate-y-[-50%] right-[8px] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"},{default:b(()=>r[3]||(r[3]=[c(" View details "),e("i",{class:"text-white ml-[5px] fa-solid fa-arrow-right"},null,-1)])),_:2},1032,["href"]),e("div",le,[e("div",pe,[e("span",ce,d(s.name),1),c(" "+d(s.created_by==null?"unknown":s.created_by),1)]),e("div",{class:"flex items-center dark:text-white-700 text-[12px] leading-[12px]",innerHTML:D(s.created_at)},null,8,ue)]),e("div",ge,[e("div",xe,[e("span",he,"Attached files ("+d((x=s.attachments)==null?void 0:x.length)+")",1),r[4]||(r[4]=e("a",{href:"javascript:;",class:"uploadedFileToggle hover:text-gray-900 transition text-[12px] leading-[16px]"},[c(" Show files "),e("i")],-1))]),e("ul",fe,[(n(!0),i(f,null,y(s.attachments,l=>(n(),i("li",{key:l.id,class:"p-[5px] block w-full rounded-[5px] dark:text-white transition hover:bg-gray-900"},[e("a",{href:l.file_path},[e("div",be,[r[5]||(r[5]=e("div",{class:"mr-[10px] w-[15px]"},[e("img",{class:"w-[15px]",src:Y,alt:""})],-1)),e("div",ye,[e("div",we,[e("div",ve,d(l.originalName),1),e("div",_e,d(U(l.size)),1)])])])],8,me)]))),128))])])],2)}),128)),w.value.length==0?(n(),i("li",ke," No orders ")):g("",!0)])]))),128))])])])):g("",!0)])])]),_:1})],64))}};export{Ue as default};
