import{k as f,h as Z,q,f as o,a as b,u as S,w as h,F as y,o as r,m as E,b as e,d as m,t as i,g as c,i as v,A as G,I as D,z as C,n as T,P as Q}from"./app-B1ozhOJo.js";import{_ as Y}from"./stlfile-wEPNyoAp.js";import{_ as J}from"./AuthenticatedLayout-CiAOSSon.js";import{$ as n}from"./jquery-DrfqwEG_.js";const K={class:"flex flex-col justify-between"},R={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200 mb-5 flex items-center"},W={key:0,class:"ml-[10px] bg-[#c6c656] text-[#916106] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"},X={key:1,class:"ml-[10px] bg-[#c65656] text-[#910606] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"},ee={class:"py-12"},te={class:"errorDIV mx-auto max-w-7xl sm:px-6 lg:px-8 flex-col flex md:flex-row gap-4 md:gap-4"},se={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-[20px] w-full",role:"alert"},ae={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 flex-col flex md:flex-row gap-4 md:gap-4"},oe={key:0,class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 w-full"},re={class:"filtersDiv p-2 border-b border-gray-100 dark:border-gray-700 flex flex-col md:flex-row gap-4"},ie={class:"p-6 text-gray-900 dark:text-gray-100"},ne={class:"flex flex-col mb-[10px]"},de={class:"text-[18px] mb-[10px] leading-[20px]"},le={class:"block font-bold mb-[5px]"},pe=["innerHTML"],ue={class:"uploadedFilesDiv"},ce={class:"text-[14px] leading-[16px] flex items-center"},ge={class:"mr-[10px]"},xe={class:"uploadedFilesUl pt-2 hide transition"},fe=["href"],me={class:"flex justify-between items-center"},be={class:"w-[calc(100%-30px)]"},he={class:"flex items-center w-full"},ye={class:"fileOriginalName mr-[10px] w-full whitespace-nowrap overflow-hidden text-ellipsis text-[14px] leading-[16px]"},ve={class:"fileSize text-right w-[100px] dark:text-white-700 text-[12px] leading-[12px]"},we={key:0,class:"text-center italic text-[14px]"},Ce={__name:"Orders",props:{orders:{type:Array,required:!0}},setup($){const U=$,F=t=>{if(typeof t!="string"&&(t=String(t)),t.includes("T")){const l=new Date(t),B=String(l.getUTCDate()).padStart(2,"0"),H=String(l.getUTCMonth()+1).padStart(2,"0"),j=l.getUTCFullYear(),A=String(l.getUTCHours()).padStart(2,"0"),I=String(l.getUTCMinutes()).padStart(2,"0"),P=String(l.getUTCSeconds()).padStart(2,"0");t=`${B}${H}${j}${A}${I}${P}`}const a=t.substring(0,2),s=t.substring(2,4)-1,x=t.substring(4,8),d=t.substring(8,10),M=t.substring(10,12),O=t.substring(12,14),k=new Date(Date.UTC(x,s,a,d,M,O)),_=Intl.DateTimeFormat().resolvedOptions().timeZone,L=k.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",timeZone:_}),z=k.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:_});return`<div class="flex"><div class="date mr-[5px]">${L}</div> <div class="time">${z}</div></div>`},N=t=>(t/(1024*1024)).toFixed(2)+" MB",p=f(""),u=f(""),g=f("desc"),w=Z(()=>U.orders.filter(t=>(!p.value||t.name.toLowerCase().includes(p.value.toLowerCase()))&&(!u.value||t.status===u.value)).sort((t,a)=>g.value==="asc"?new Date(t.created_at)-new Date(a.created_at):new Date(a.created_at)-new Date(t.created_at))),V=()=>{u.value="",p.value="",g.value="desc"};return q(()=>{n(".uploadedFileToggle").click(function(){n(this).hasClass("open")?(n(this).removeClass("open"),n(this).parent().parent().find(".uploadedFilesUl").slideUp(),n(this).text("Show files")):(n(this).addClass("open"),n(this).parent().parent().find(".uploadedFilesUl").slideDown(),n(this).text("Hide files"))})}),f(!1),(t,a)=>(r(),o(y,null,[b(S(E),{title:"Orders"}),b(J,null,{header:h(()=>[e("div",K,[e("h2",R,[m(" Hi, "+i(t.$page.props.auth.user.name)+"! ",1),t.$page.props.auth.user.type=="admin"?(r(),o("span",W," admin ")):c("",!0),t.$page.props.auth.user.type=="superadmin"?(r(),o("span",X," SUDO ")):c("",!0)])])]),default:h(()=>[e("div",ee,[e("div",te,[t.$page.props.flash.message?(r(),o("div",se,i(t.$page.props.flash.message),1)):c("",!0)]),e("div",ae,[t.$page.props.auth.user.type=="admin"||t.$page.props.auth.user.type=="superadmin"?(r(),o("div",oe,[e("div",re,[v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>p.value=s),type:"text",placeholder:"Search by name...",class:"mt-0 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600 block w-full md:w-1/2"},null,512),[[G,p.value]]),v(e("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>u.value=s),class:"mt-0 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600 block w-full md:w-1/4"},a[4]||(a[4]=[e("option",{value:""},"All",-1),e("option",{value:"new"},"New",-1),e("option",{value:"processing"},"Processing",-1),e("option",{value:"shipped"},"Shipped",-1),e("option",{value:"done"},"Done",-1),e("option",{value:"canceled"},"Canceled",-1)]),512),[[D,u.value]]),v(e("select",{"onUpdate:modelValue":a[2]||(a[2]=s=>g.value=s),class:"mt-0 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600 block w-full md:w-1/4"},a[5]||(a[5]=[e("option",{value:"desc"},"Newest First",-1),e("option",{value:"asc"},"Oldest First",-1)]),512),[[D,g.value]]),e("button",{onClick:a[3]||(a[3]=s=>V()),class:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-1 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-gray-700 focus:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 active:bg-gray-900 dark:bg-gray-200 dark:text-gray-800 dark:hover:bg-white dark:focus:bg-white dark:focus:ring-offset-gray-800 dark:active:bg-gray-300"}," Clear ")]),e("div",ie,[e("ul",null,[(r(!0),o(y,null,C(w.value,s=>{var x;return r(),o("li",{key:s.id,class:T([{"border-gray-300 dark:border-gray-600 ":s.status==="new","border-yellow-500 border-opacity-50":s.status==="processing","border-blue-400 border-opacity-50":s.status==="shipped","border-green-500 border-opacity-50":s.status==="done","border-red-500 border-opacity-50":s.status==="canceled"},"p-2 relative mb-[20px] last:mb-0 block w-full rounded-[10px] border-2 shadow-sm dark:bg-gray-700 dark:text-white"])},[e("div",{class:T([{"bg-white text-gray-700":s.status==="new","bg-yellow-500 text-yellow-800":s.status==="processing","bg-blue-400 text-blue-900":s.status==="shipped","bg-green-500 text-green-900":s.status==="done","bg-red-500  text-red-900":s.status==="canceled"},"absolute top-2 right-[8px] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"])},i(s.status),3),b(S(Q),{href:t.route("orders.details",{id:s.id}),class:"absolute top-[50%] translate-y-[-50%] right-[8px] p-[2px] px-[5px] rounded-[5px] font-bold text-[12px] leading-[12px]"},{default:h(()=>a[6]||(a[6]=[m(" View details "),e("i",{class:"text-white ml-[5px] fa-solid fa-arrow-right"},null,-1)])),_:2},1032,["href"]),e("div",ne,[e("div",de,[e("span",le,i(s.name),1),m(" "+i(s.created_by==null?"unknown":s.created_by),1)]),e("div",{class:"flex items-center dark:text-white-700 text-[12px] leading-[12px]",innerHTML:F(s.created_at)},null,8,pe)]),e("div",ue,[e("div",ce,[e("span",ge,"Attached files ("+i((x=s.attachments)==null?void 0:x.length)+")",1),a[7]||(a[7]=e("a",{href:"javascript:;",class:"uploadedFileToggle hover:text-gray-900 transition text-[12px] leading-[16px]"},[m(" Show files "),e("i")],-1))]),e("ul",xe,[(r(!0),o(y,null,C(s.attachments,d=>(r(),o("li",{key:d.id,class:"p-[5px] block w-full rounded-[5px] dark:text-white transition hover:bg-gray-900"},[e("a",{href:d.file_path},[e("div",me,[a[8]||(a[8]=e("div",{class:"mr-[10px] w-[15px]"},[e("img",{class:"w-[15px]",src:Y,alt:""})],-1)),e("div",be,[e("div",he,[e("div",ye,i(d.originalName),1),e("div",ve,i(N(d.size)),1)])])])],8,fe)]))),128))])])],2)}),128)),w.value.length==0?(r(),o("li",we," No orders ")):c("",!0)])])])):c("",!0)])])]),_:1})],64))}};export{Ce as default};
